{"ast":null,"code":"import React,{useEffect,useReducer,useState}from\"react\";import{useParams,Link}from\"react-router-dom\";import DiamondCustomizer from\"./DiamondCustomizer\";import\"../styles/DiamondList.css\";import\"../styles/ProductList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const initialState={diamonds:[],isLoading:true,error:null};const reducer=(state,action)=>{switch(action.type){case\"FETCH_SUCCESS\":return{...state,isLoading:false,diamonds:action.payload};case\"FETCH_ERROR\":return{...state,isLoading:false,error:action.payload};default:return state;}};const DiamondList=()=>{const[state,dispatch]=useReducer(reducer,initialState);const[customOptions,setCustomOptions]=useState(null);const{shape}=useParams();const handleCustomize=options=>{setCustomOptions(options);};useEffect(()=>{const fetchDiamonds=async()=>{try{let apiUrl=\"/api/diamonds\";if(shape){apiUrl=\"/api/diamonds/shape/\".concat(shape);}// Add custom options to the API URL\nif(customOptions){const params=new URLSearchParams(customOptions).toString();apiUrl+=\"?\".concat(params);}const response=await fetch(apiUrl);if(!response.ok){throw new Error(\"Network response was not ok\");}const data=await response.json();dispatch({type:\"FETCH_SUCCESS\",payload:data});}catch(error){dispatch({type:\"FETCH_ERROR\",payload:error.message});}};fetchDiamonds();},[shape,customOptions]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(DiamondCustomizer,{onFilter:handleCustomize}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:state.isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):state.error?/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",state.error]}):state.diamonds.map(diamond=>/*#__PURE__*/_jsxs(\"li\",{className:\"product-item\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/product/diamonds/\".concat(diamond._id),children:[/*#__PURE__*/_jsx(\"img\",{src:diamond.image,alt:\"\".concat(diamond.type,\" diamond\")}),/*#__PURE__*/_jsx(\"h4\",{children:diamond.type})]}),/*#__PURE__*/_jsxs(\"p\",{children:[diamond.carat,\" carats - \",diamond.cut,\" cut -\",\" \",diamond.color,\" color - \",diamond.clarity,\" clarity - $\",diamond.price]})]},diamond._id))})]});};export default DiamondList;","map":{"version":3,"names":["React","useEffect","useReducer","useState","useParams","Link","DiamondCustomizer","jsx","_jsx","jsxs","_jsxs","initialState","diamonds","isLoading","error","reducer","state","action","type","payload","DiamondList","dispatch","customOptions","setCustomOptions","shape","handleCustomize","options","fetchDiamonds","apiUrl","concat","params","URLSearchParams","toString","response","fetch","ok","Error","data","json","message","children","onFilter","className","map","diamond","to","_id","src","image","alt","carat","cut","color","clarity","price"],"sources":["/Users/patrickciongoli/Desktop/03-coding/Business/eclatir/eclatir-diamond-ecommerce/src/components/DiamondList.js"],"sourcesContent":["import React, { useEffect, useReducer, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport DiamondCustomizer from \"./DiamondCustomizer\";\nimport \"../styles/DiamondList.css\";\nimport \"../styles/ProductList.css\";\n\nconst initialState = {\n   diamonds: [],\n   isLoading: true,\n   error: null,\n};\n\nconst reducer = (state, action) => {\n   switch (action.type) {\n      case \"FETCH_SUCCESS\":\n         return {\n            ...state,\n            isLoading: false,\n            diamonds: action.payload,\n         };\n      case \"FETCH_ERROR\":\n         return {\n            ...state,\n            isLoading: false,\n            error: action.payload,\n         };\n      default:\n         return state;\n   }\n};\n\nconst DiamondList = () => {\n   const [state, dispatch] = useReducer(reducer, initialState);\n   const [customOptions, setCustomOptions] = useState(null);\n   const { shape } = useParams();\n\n   const handleCustomize = (options) => {\n      setCustomOptions(options);\n   };\n\n   useEffect(() => {\n      const fetchDiamonds = async () => {\n         try {\n            let apiUrl = \"/api/diamonds\";\n            if (shape) {\n               apiUrl = `/api/diamonds/shape/${shape}`;\n            }\n\n            // Add custom options to the API URL\n            if (customOptions) {\n               const params = new URLSearchParams(customOptions).toString();\n               apiUrl += `?${params}`;\n            }\n\n            const response = await fetch(apiUrl);\n\n            if (!response.ok) {\n               throw new Error(\"Network response was not ok\");\n            }\n\n            const data = await response.json();\n            dispatch({ type: \"FETCH_SUCCESS\", payload: data });\n         } catch (error) {\n            dispatch({ type: \"FETCH_ERROR\", payload: error.message });\n         }\n      };\n\n      fetchDiamonds();\n   }, [shape, customOptions]);\n\n   return (\n      <div>\n         <DiamondCustomizer onFilter={handleCustomize} />\n\n         <ul className=\"product-list\">\n            {state.isLoading ? (\n               <p>Loading...</p>\n            ) : state.error ? (\n               <p>Error: {state.error}</p>\n            ) : (\n               state.diamonds.map((diamond) => (\n                  <li key={diamond._id} className=\"product-item\">\n                     <Link to={`/product/diamonds/${diamond._id}`}>\n                        <img\n                           src={diamond.image}\n                           alt={`${diamond.type} diamond`}\n                        />\n                        <h4>{diamond.type}</h4>\n                     </Link>\n                     <p>\n                        {diamond.carat} carats - {diamond.cut} cut -{\" \"}\n                        {diamond.color} color - {diamond.clarity} clarity - $\n                        {diamond.price}\n                     </p>\n                  </li>\n               ))\n            )}\n         </ul>\n      </div>\n   );\n};\n\nexport default DiamondList;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAClD,MAAO,CAAAC,iBAAiB,KAAM,qBAAqB,CACnD,MAAO,2BAA2B,CAClC,MAAO,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnC,KAAM,CAAAC,YAAY,CAAG,CAClBC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,IAAI,CACfC,KAAK,CAAE,IACV,CAAC,CAED,KAAM,CAAAC,OAAO,CAAGA,CAACC,KAAK,CAAEC,MAAM,GAAK,CAChC,OAAQA,MAAM,CAACC,IAAI,EAChB,IAAK,eAAe,CACjB,MAAO,CACJ,GAAGF,KAAK,CACRH,SAAS,CAAE,KAAK,CAChBD,QAAQ,CAAEK,MAAM,CAACE,OACpB,CAAC,CACJ,IAAK,aAAa,CACf,MAAO,CACJ,GAAGH,KAAK,CACRH,SAAS,CAAE,KAAK,CAChBC,KAAK,CAAEG,MAAM,CAACE,OACjB,CAAC,CACJ,QACG,MAAO,CAAAH,KAAK,CAClB,CACH,CAAC,CAED,KAAM,CAAAI,WAAW,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACJ,KAAK,CAAEK,QAAQ,CAAC,CAAGnB,UAAU,CAACa,OAAO,CAAEJ,YAAY,CAAC,CAC3D,KAAM,CAACW,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAAEqB,KAAM,CAAC,CAAGpB,SAAS,CAAC,CAAC,CAE7B,KAAM,CAAAqB,eAAe,CAAIC,OAAO,EAAK,CAClCH,gBAAgB,CAACG,OAAO,CAAC,CAC5B,CAAC,CAEDzB,SAAS,CAAC,IAAM,CACb,KAAM,CAAA0B,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACD,GAAI,CAAAC,MAAM,CAAG,eAAe,CAC5B,GAAIJ,KAAK,CAAE,CACRI,MAAM,wBAAAC,MAAA,CAA0BL,KAAK,CAAE,CAC1C,CAEA;AACA,GAAIF,aAAa,CAAE,CAChB,KAAM,CAAAQ,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACT,aAAa,CAAC,CAACU,QAAQ,CAAC,CAAC,CAC5DJ,MAAM,MAAAC,MAAA,CAAQC,MAAM,CAAE,CACzB,CAEA,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACN,MAAM,CAAC,CAEpC,GAAI,CAACK,QAAQ,CAACE,EAAE,CAAE,CACf,KAAM,IAAI,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CACjD,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCjB,QAAQ,CAAC,CAAEH,IAAI,CAAE,eAAe,CAAEC,OAAO,CAAEkB,IAAK,CAAC,CAAC,CACrD,CAAE,MAAOvB,KAAK,CAAE,CACbO,QAAQ,CAAC,CAAEH,IAAI,CAAE,aAAa,CAAEC,OAAO,CAAEL,KAAK,CAACyB,OAAQ,CAAC,CAAC,CAC5D,CACH,CAAC,CAEDZ,aAAa,CAAC,CAAC,CAClB,CAAC,CAAE,CAACH,KAAK,CAAEF,aAAa,CAAC,CAAC,CAE1B,mBACGZ,KAAA,QAAA8B,QAAA,eACGhC,IAAA,CAACF,iBAAiB,EAACmC,QAAQ,CAAEhB,eAAgB,CAAE,CAAC,cAEhDjB,IAAA,OAAIkC,SAAS,CAAC,cAAc,CAAAF,QAAA,CACxBxB,KAAK,CAACH,SAAS,cACbL,IAAA,MAAAgC,QAAA,CAAG,YAAU,CAAG,CAAC,CAChBxB,KAAK,CAACF,KAAK,cACZJ,KAAA,MAAA8B,QAAA,EAAG,SAAO,CAACxB,KAAK,CAACF,KAAK,EAAI,CAAC,CAE3BE,KAAK,CAACJ,QAAQ,CAAC+B,GAAG,CAAEC,OAAO,eACxBlC,KAAA,OAAsBgC,SAAS,CAAC,cAAc,CAAAF,QAAA,eAC3C9B,KAAA,CAACL,IAAI,EAACwC,EAAE,sBAAAhB,MAAA,CAAuBe,OAAO,CAACE,GAAG,CAAG,CAAAN,QAAA,eAC1ChC,IAAA,QACGuC,GAAG,CAAEH,OAAO,CAACI,KAAM,CACnBC,GAAG,IAAApB,MAAA,CAAKe,OAAO,CAAC1B,IAAI,YAAW,CACjC,CAAC,cACFV,IAAA,OAAAgC,QAAA,CAAKI,OAAO,CAAC1B,IAAI,CAAK,CAAC,EACpB,CAAC,cACPR,KAAA,MAAA8B,QAAA,EACII,OAAO,CAACM,KAAK,CAAC,YAAU,CAACN,OAAO,CAACO,GAAG,CAAC,QAAM,CAAC,GAAG,CAC/CP,OAAO,CAACQ,KAAK,CAAC,WAAS,CAACR,OAAO,CAACS,OAAO,CAAC,cACzC,CAACT,OAAO,CAACU,KAAK,EACd,CAAC,GAZEV,OAAO,CAACE,GAab,CACN,CACH,CACA,CAAC,EACH,CAAC,CAEZ,CAAC,CAED,cAAe,CAAA1B,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}